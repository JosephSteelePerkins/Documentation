function setup_toggle_tabs() {

	// find all anchors with a class of toggle_tab
	var toggle_tabs = getElementsByClass('toggle_tab', document, 'A');
	// loop through, add event on change
	for (var i = 0; i < toggle_tabs.length; i++) {
		toggle_tab_link = toggle_tabs[i];
		// attach onclick function
		addEvent(toggle_tab_link, 'click', toggle_tab, false);
	}

}

function toggle_tab(e) {

	if (window.event) {
		// IE does it differently... stores the event in a window.event object
		var this_element = window.event.srcElement;
	} else {
		var this_element = this;
	}

	// find the target
	var target = findTarget(e);
	// get some of the targets attributes
	var target_href = target.getAttribute('href');
	// strip the hash off the href
	var target_id = target_href.replace(/#/i, '');

	if (!document.getElementById(target_id)) return false;
	
	active_tab = document.getElementById(target_id);
	
	// hide all tab_panels
	var tab_panels = getElementsByClass('tab_panel', document, 'DIV');
	// loop through, add event on change
	for (var i = 0; i < tab_panels.length; i++) {
		tab_panel = tab_panels[i];
		tab_panel.style.display = 'none';
	}
	
	// show the active one
	active_tab.style.display = '';
	
	// unhighlight all tab_panel_links
	var tab_panel_links = getElementsByClass('tab_panel_link', document, 'H3');
	
	for (var i = 0; i < tab_panel_links.length; i++) {
		tab_panel_link = tab_panel_links[i];
		//alert(tab_panel_link.className);
		tab_panel_link.className = tab_panel_link.className.replace(/\b ?active_tab\b/,'');
	}
	
	this_element.parentNode.className += ' active_tab';
	
	// cancel bubble and href of this anchor
	cancelClick(e);
	// hack for Safari (stops browser following href link)
	this_element.onclick = function() { return false; }
}

function toggleItem(targetID, target2ID) {
	if (document.getElementById) {
		target = document.getElementById(targetID);
		target2 = document.getElementById(target2ID);
		if (target.style.display == "none") {
			target.style.display = "";
			target2.style.backgroundImage = "url('../images/triangle-open.gif')";
		} else {
			target.style.display = "none";
			target2.style.backgroundImage = "url('../images/triangle-close.gif')";
		}
	}
}

function setupURLJumperSelect() {
	// get all select elements with the class 'url_jump_select'
	var selects = getElementsByClass('url_jump_select', document, 'SELECT');
	// loop through, add event on change
	for (var i = 0; i < selects.length; i++) {
		selectElement = selects[i];
		// attach onclick function
		addEvent(selectElement, 'change', urlJumpSelect, false);
	}	
}

function urlJumpSelect(e) {
	// find the target
	var target = findTarget(e);
	var path = target.value;
	if (path.length > 0) {
		document.location.href = path;
	}
}

function setUpRadiosAndCheckboxes() {
	// get all select elements with the class 'url_jump_select'
	var inputs = document.getElementsByTagName('INPUT');
	// loop through, add class 'radio' if they are a radio or checkbox
	for (var i = 0; i < inputs.length; i++) {
		inputElement = inputs[i];
		if (inputElement.getAttribute('type') == 'checkbox' || inputElement.getAttribute('type') == 'radio') {
			// add class
			inputElement.className += ' radio';
		}
	}	
}

function toggleList(e) {
	
	// get a reference to the anchor and it's parentNode (the <li> element)
	if (window.event) {
		// IE does it differently... stores the event in a window.event object
		var thisA = window.event.srcElement;
		//alert(thisA);
		var thisLI = thisA.parentNode;
	} else {
		var thisA = this;
		var thisLI = this.parentNode;
	}
	// if this li has nested ul elements...
	if (thisLI.getElementsByTagName('ul').length > 0) {
		
		var toggleListTarget = thisLI.getElementsByTagName('ul')[0];
		//...toggle visibility of first ul
		if (toggleListTarget.style.display != 'none' ) {
			toggleListTarget.style.display = 'none';
			//thisA.style.color = '';
			thisA.style.backgroundImage = 'url(../images/arrowright.gif)';
			//closeListArrow();
		} else {
			toggleListTarget.style.display = '';
			//thisA.style.color = 'white';
			thisA.style.backgroundImage = 'url(../images/arrowdown.gif)';
			//expandListArrow();
		}
		// cancel bubble and href of this anchor
		cancelClick(e);
		// hack for Safari (stops browser following href link)
		thisA.onclick = function() { return false; }
	}
}

function setUpCollapsingList() {

	// find the toggle list
	var lists = getElementsByClass('collapsible_list', document, 'ul');
	
	for (var x = 0; x < lists.length; x++) {
		//list = document.getElementById('collapsingList');
		list = lists[x];
		// find all it's child UL elements
		var childLists = list.getElementsByTagName('ul');
		// hide them all
		for (var i = 0; i < childLists.length; i++) {
			var childList = childLists[i];
			childList.style.display = 'none';
		}
		
		// attach toggleList function to onclick of each anchor
		var childAnchors = list.getElementsByTagName('a');
		// hide them all
		for (var i = 0; i < childAnchors.length; i++) {
			var childAnchor = childAnchors[i];
			// attach toggleList function to onclick of each anchor
			addEvent(childAnchor, 'click', toggleList, false);
		}
	}
}

function load_ticker() {
	if (document.getElementById('ticker')) {
		var ticker = document.getElementById('ticker');

		// remove all chidren inside ticker
		while (ticker.hasChildNodes()) {
			ticker.removeChild(ticker.firstChild);
		}
		
		var iframe_src = getPathToRoot() + 'inc/news_ticker.php?section_id=' + section_id;
		
		// create the iframe element
		var iframe = document.createElement('iframe');
		iframe.setAttribute('height', 16);
		iframe.setAttribute('width', 395);
		iframe.setAttribute('marginwidth', 0);
		iframe.setAttribute('marginheight', 0);
		iframe.setAttribute('frameBorder', 0); // note the case-sensitivity for IE6
		iframe.setAttribute('scrolling', 'no');
		iframe.setAttribute('src', iframe_src);
		
		// add to the ticker DIV
		ticker.appendChild(iframe);
	}
}

addLoadEvent(setup_toggle_tabs);

/*
addLoadEvent(load_ticker);
addLoadEvent(setupURLJumperSelect);
addLoadEvent(setUpRadiosAndCheckboxes);
addLoadEvent(setUpCollapsingList);
*/